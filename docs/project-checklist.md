# Cloud DevOps Lab — Project Roadmap

This document is the **authoritative roadmap and checklist** for the Cloud DevOps Lab.
It reflects the real implementation state of the project and defines what has been
completed, what is in progress, and what belongs to future expansion.

---

## 1. Servers & Networking (Terraform / Linode)

- [x] Create three servers (jump, app, monitoring)
- [x] Shared private network between all servers
- [x] Jump server as the only public SSH entry point
- [x] App server has public IP for HTTP access (temporary)
- [x] Monitoring server private-only
- [x] Firewall rules enforced via Terraform
- [ ] Reserved IPv4 address for app server (stable DNS target)
- [ ] Remote Terraform state backend (S3-compatible / Terraform Cloud)
- [ ] Terraform CI checks (`fmt`, `validate`, `tflint`)
- [ ] Document Terraform module contracts (inputs/outputs)

---

## 2. DNS & Domain (Cloudflare + Registrar)

- [x] Domain registered (simply.com)
- [x] Nameservers delegated to Cloudflare
- [x] DNS records created for app server
- [x] Cloudflare in DNS-only mode (proxy disabled)
- [ ] Terraform-managed DNS records (Cloudflare provider)
- [ ] Stable DNS target via reserved IP
- [x] Decide exposure model for monitoring (private vs public)
- [ ] Cloudflare in DNS and proxy mode

---

## 3. Access Control & SSH Security (Ansible)

- [x] Non-root `devops` user created on all servers
- [x] Password authentication disabled
- [x] Challenge-response authentication disabled
- [x] Root SSH login disabled
- [x] SSH access restricted via `AllowUsers`
- [x] Bastion (jump host) enforced
- [x] SSH agent forwarding configured and documented
- [x] Ansible runs as `devops` with `become`
- [x] Restrict SSH on jump server to trusted IP ranges
- [ ] Explicit SSH hardening parameters (`MaxAuthTries`, `LoginGraceTime`)
- [x] Fail2ban on jump server
- [ ] Break-glass access procedure documented

---

## 4. Firewalls & Host Hardening

- [x] Linode firewalls applied to all servers
- [x] SSH allowed to app/monitoring only from jump private IP
- [x] Inbound policy DROP, outbound ACCEPT
- [x] App firewall allows HTTP (80)
- [ ] Firewall rules reviewed and minimized
- [x] Automatic security updates (unattended-upgrades)
- [ ] Disable unused services and packages
- [ ] Basic system auditing and log retention

---

## 5. Secrets Management

- [x] Terraform secrets via environment variables
- [x] GitHub Actions secrets for CI
- [x] Ansible Vault for runtime secrets (e.g., Grafana admin password)
- [ ] Encrypted `.env` files generated by Ansible
- [ ] Secret rotation strategy documented
- [ ] Optional: HashiCorp Vault (Roadmap Part 2)

---

## 6. Container Runtime (Docker)

- [x] Docker installed via Ansible (app + monitoring)
- [x] Docker not installed on jump server
- [x] `devops` user added to docker group
- [x] Application container deployed
- [x] Restart policy (`unless-stopped`)
- [x] Healthcheck implemented
- [x] Container runs as non-root user (Flask app)
- [ ] Resource limits (CPU/memory)
- [ ] Log rotation for Docker containers
- [ ] Migrate app deployment to Docker Compose

---

## 7. CI/CD (GitHub Actions + GHCR)

- [x] Docker image built in CI
- [x] Images pushed to GHCR
- [x] Immutable SHA tags used for deployment
- [x] Deployment via Ansible using pinned image
- [ ] Linting and unit tests in CI
- [ ] Container vulnerability scanning (Trivy/Grype)
- [ ] SBOM generation
- [ ] Promotion workflow (staging → production)
- [ ] Semantic versioning strategy

---

## 8. Application Deployment

- [x] App deployed via Ansible
- [x] Health endpoint validated automatically
- [x] HTTP exposed on port 80
- [x] Bind app container to localhost only (via reverse proxy)
- [ ] Blue/green or rolling deployment strategy
- [ ] Rollback procedure documented

---

## 9. Monitoring & Observability

### Node Exporter

- [x] Node Exporter deployed on app server
- [x] Node Exporter deployed on monitoring server
- [x] Metrics verified on port 9100

### Prometheus

- [x] Prometheus deployed on monitoring server
- [x] Scrape node exporters (app + monitoring via private IPs)
- [x] Scrape application metrics (`/metrics` scraped as job `flask_app`)
- [ ] Retention and storage tuned/configured explicitly (beyond defaults)
- [ ] Alert rules definedned


### Grafana

- [x] Grafana deployed on monitoring server
- [x] Prometheus datasource configured
- [x] Node exporter dashboards imported
- [x] App dashboards created (custom panels for `flask_app`):
  - `process_resident_memory_bytes`
  - `rate(process_cpu_seconds_total[5m])`
  - `rate(python_gc_objects_collected_total[5m])`
- [x] Default Grafana admin password rotated (stored in Ansible Vault)
- [ ] Access control hardening (users/roles/SSO; still private via SSH tunnel)

---

## 10. TLS, Reverse Proxy & Edge Security

- [x] Reverse proxy (Nginx / Caddy / Traefik)
- [x] HTTPS via Let’s Encrypt
- [x] App container bound to localhost
- [ ] Cloudflare proxy enabled
- [ ] Origin access restricted to Cloudflare IPs
- [x] Basic security headers (nosniff, frame deny, referrer policy)
- [] HSTS enabled (HTTP Strict Transport Security)

---

# Roadmap — Part 2 (After Core Project)

### Reliability & Scaling

- [ ] Reserved IP + NodeBalancer
- [ ] Blue/green or canary deployments
- [ ] Automated rollbacks
- [ ] Load testing

### Security Maturity

- [ ] Centralized logging (Loki / ELK)
- [ ] SSO for Grafana
- [ ] WAF rules and rate limiting
- [ ] Image signing (Cosign)

### Infrastructure Maturity

- [ ] Remote Terraform state + workspaces
- [ ] Terraform → Ansible dynamic inventory
- [ ] Pre-commit hooks
- [ ] Policy as Code (OPA / Conftest)

### Orchestration (Choose One)

- [ ] Docker Compose (production-grade)
- [ ] Docker Swarm
- [ ] Kubernetes (k3s, ingress, cert-manager, GitOps)

---

## Project Rules

- Every stage starts with a new git branch
- No manual changes on servers
- Pinned versions only
- Documentation updated at the end of each stage
